<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Games • New Resident Yogyakarta</title>

  <!-- Pake CSS lama kamu kalau ada -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Tambahan CSS khusus layout game (warna tetap ngikut tema lama) -->
  <style>
    :root{
      --pink: #f2a3c7;
      --pink2:#d98ab7;
      --bg1:#05050d;
      --panel: rgba(15, 14, 28, .65);
      --panel2: rgba(255,255,255,.06);
      --border: rgba(255,255,255,.12);
      --muted: rgba(255,255,255,.7);
      --text: #fff;
    }

    /* ===== page base ===== */
    body{
      min-height: 100vh;
    }

    /* Biar layout game jadi satu layar */
    .gameWrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 18px;
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 14px;
      height: 100vh;
      box-sizing: border-box;
    }

    /* ===== header area (brand + nav) ===== */
    .gameTop{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:14px;
    }
    .brand{
      display:flex;
      flex-direction:column;
      gap:2px;
    }
    .brand b{
      font-size:18px;
      color: var(--pink);
      letter-spacing:.02em;
    }
    .brand small{
      color: rgba(255,255,255,.65);
      font-size: 11px;
      letter-spacing: .14em;
      text-transform: uppercase;
    }

    .nav{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .nav a{
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.78);
      font-size: 13px;
      text-decoration:none;
      background: rgba(255,255,255,.04);
      transition: all .15s ease;
    }
    .nav a:hover{ background: rgba(255,255,255,.08); }
    .nav a.active{
      color:#0b0a12;
      background: linear-gradient(180deg, var(--pink), var(--pink2));
      border-color: rgba(255,255,255,.18);
      font-weight: 700;
    }

    /* ===== main grid (left leaderboard + center game) ===== */
    .gameMain{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap: 16px;
      min-height: 0; /* penting supaya child bisa scroll */
    }

    /* ===== card base ===== */
    .card{
      border: 1px solid var(--border);
      background: var(--panel);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      box-shadow: 0 28px 90px rgba(0,0,0,.55);
    }

    /* ===== left: leaderboard ===== */
    .lbCard{
      display:flex;
      flex-direction:column;
      min-height: 0;
      overflow:hidden;
    }
    .lbHead{
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .lbHead b{ font-size:14px; }
    .lbHead small{ color: var(--muted); }
    #meTag{ color: rgba(255,255,255,.75); font-size:12px; }

    .lbBody{
      padding: 12px;
      overflow:auto;   /* <<< scroll cuma leaderboard */
      min-height: 0;
    }

    /* biar list item rapi */
    .lb-item{
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius: 14px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }

    /* ===== right: question + bottom panels ===== */
    .centerCol{
      display:grid;
      grid-template-rows: 1fr auto;
      gap: 14px;
      min-height: 0;
    }

    /* question card */
    .qCard{
      padding: 16px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      min-height: 0;
    }

    .qTopRow{
      width:100%;
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:10px;
      margin-bottom: 10px;
    }
    .roomMeta{
      text-align:left;
      font-size: 13px;
      color: rgba(255,255,255,.78);
    }
    .roomMeta b{ color:#fff; }
    .roomMeta .kecil{ opacity:.85; margin-top:6px; }

    .btnMini{
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color: #fff;
      cursor:pointer;
    }
    .btnMini:hover{ background: rgba(255,255,255,.08); }

    .qLabel{
      letter-spacing:.22em;
      font-size: 12px;
      color: rgba(255,255,255,.65);
      font-weight:700;
      margin-top: 6px;
    }
    #qText{
      font-size: clamp(28px, 5vw, 64px);
      font-weight: 900;
      line-height: 1.05;
      margin: 12px 0 12px;
    }
    .qDivider{
      width:100%;
      height:1px;
      background: rgba(255,255,255,.10);
      margin: 10px 0 14px;
    }

    #buzzBtn{
      width: min(320px, 70%);
      border: none;
      border-radius: 999px;
      padding: 14px 18px;
      font-weight: 900;
      letter-spacing: .08em;
      cursor:pointer;
      background: linear-gradient(180deg, rgba(242,163,199,.65), rgba(217,138,183,.55));
      color:#0b0a12;
      box-shadow: 0 18px 55px rgba(0,0,0,.55);
    }
    #buzzBtn:disabled{
      opacity:.55;
      cursor:not-allowed;
    }

    #buzzInfo{
      margin-top: 10px;
      color: rgba(255,255,255,.78);
      font-size: 13px;
      min-height: 18px;
    }

    /* ===== bottom panel (tabs + content) ===== */
    .bottomCard{
      padding: 14px;
      min-height: 0;
    }

    .tabs{
      display:flex;
      gap:10px;
      margin-bottom: 12px;
    }
    .tab{
      flex:1;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color:#fff;
      font-weight: 800;
      letter-spacing: .08em;
      cursor:pointer;
    }
    .tab.is-active{
      background: linear-gradient(180deg, var(--pink), var(--pink2));
      color:#0b0a12;
      border-color: rgba(255,255,255,.18);
    }
    .tab.is-locked{
      opacity:.55;
      cursor:not-allowed;
    }

    .panels{
      display:block;
      min-height: 0;
    }

    .panel{
      display:none;
      min-height: 0;
    }
    .panel.is-active{ display:block; }

/* =========================
   PANEL JAWABAN FINAL FIX
   ========================= */

#panelJawaban{
  display: flex;
  flex-direction: column;
  height: 360px;       /* tinggi fix stabil */
  max-height: 50vh;
  gap: 12px;
  overflow: hidden;
}

/* container utama */
.feedBox{
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

/* ===== HISTORY AREA (SCROLL DI SINI) ===== */
#feedWrap{
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

#feedStatus{
  display: none; /* hilangkan teks dobel */
}

#feedList{
  flex: 1;
  overflow-y: auto;
  padding-right: 8px;
}

/* Scrollbar */
#feedList::-webkit-scrollbar{
  width: 6px;
}
#feedList::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.15);
  border-radius: 999px;
}

/* ===== ANSWER BOX (DI BAWAH) ===== */
#answerBox{
  border-top: 1px solid rgba(255,255,255,.08);
  padding-top: 12px;
  margin-top: 10px;
  position: relative;
}

/* textarea kecil dan rapi */
#answerText{
  width: 100%;
  height: 70px;
  resize: none;
  padding-right: 130px; /* ruang tombol */
  box-sizing: border-box;
}

/* tombol kirim nempel kanan bawah */
#sendAnswerBtn{
  position: absolute;
  right: 0;
  bottom: 0;
}
    /* ===== join card ===== */
    .joinCard{
      padding: 18px;
      max-width: 860px;
      margin: 0 auto;
    }
    .joinGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }
    .joinGrid input{
      width:100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color:#fff;
      padding: 10px 12px;
      outline:none;
      box-sizing:border-box;
    }
    .joinActions{
      display:flex;
      gap: 10px;
      align-items:center;
      margin-top: 12px;
    }
    #joinBtn{
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color:#fff;
      cursor:pointer;
      font-weight: 800;
    }
    #joinBtn:hover{ background: rgba(255,255,255,.08); }
    #joinStatus{
      color: rgba(255,255,255,.78);
      font-size: 13px;
    }

    /* ===== responsive ===== */
    @media (max-width: 980px){
      .gameWrap{ height: auto; min-height: 100vh; }
      .gameMain{
        grid-template-columns: 1fr;
      }
      .lbBody{ max-height: 260px; }
      .centerCol{ grid-template-rows: auto auto; }
      .feedBox{ max-height: 220px; }
    }

    /* ===== overlay end ===== */
    #endOverlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.72);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 9999;
    }
    .overlayBox{
      width: 100%;
      max-width: 560px;
      padding: 16px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(12,10,24,.92);
      box-shadow: 0 28px 90px rgba(0,0,0,.7);
    }
    .overlayHead{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom: 8px;
    }
    #closeOverlay{
      width: 38px;
      height: 38px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: #fff;
      cursor:pointer;
    }
    #answerBox[data-disabled="1"]{
  opacity: .65;
  filter: grayscale(.15);
}
#answerBox[data-disabled="1"] textarea,
#answerBox[data-disabled="1"] button{
  cursor: not-allowed;
}

/* Biar layout nggak kepanjangan */
.panel .feedBox{
  max-height: 40vh;       /* atur: 35-45vh enak */
  overflow: hidden;       /* jangan scroll seluruh box */
}

/* Yang boleh scroll hanya list feed */
#feedList{
  max-height: 18vh;       /* khusus area list */
  overflow-y: auto;
  padding-right: 6px;
}

/* Biar textarea nggak makan tempat kebanyakan */
#answerText{
  height: 110px;
  max-height: 110px;
  resize: none;
}
    /* ===== JAWABAN PANEL LAYOUT FIX ===== */

/* Panel jawaban jadi flex column */
#panelJawaban {
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 0; /* penting biar scroll internal bisa jalan */
}

/* 1) HILANGKAN teks status dobel "Belum ada jawaban." */
#feedStatus {
  display: none !important;
}

/* Kadang kamu juga punya container status lain, kalau masih dobel, aktifkan ini:
#panelJawaban .muted { display:none !important; }
*/

/* 2) NAIKKAN box input (answerBox) ke ATAS dan bikin nempel */
#answerBox {
  order: 1;               /* <-- ini bikin dia di atas feed */
  margin: 0 !important;
  padding: 14px;
  border-radius: 16px;
}

/* Optional: kalau answerBox masih punya tinggi besar */
#answerBox textarea,
#answerText {
  min-height: 90px;
  max-height: 140px;
  resize: vertical;
}

/* 3) Feed list (daftar jawaban) di bawah, dan jadi scroll area */
#feedList {
  order: 2;
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding-right: 6px; /* biar scroll gak nabrak */
}

/* Scrollbar halus (opsional) */
#feedList::-webkit-scrollbar {
  width: 8px;
}
#feedList::-webkit-scrollbar-thumb {
  border-radius: 99px;
  background: rgba(255, 255, 255, 0.12);
}

/* 4) Kalau "Belum ada jawaban" muncul sebagai item feed (dari innerHTML kamu),
      tetap tampil sebagai placeholder tapi jangan jadi box besar jelek */
#feedList .a .muted,
#feedList .muted {
  opacity: 0.75;
}

/* 5) Pastikan seluruh panel (kotak bawah) tidak bikin halaman scroll panjang */
#panelJawaban,
#panelObrolan {
  min-height: 0;
}

    /* ===== STAGE LAYOUT (SAMAIN KAYAK SCREENSHOT) ===== */
.gameStage{
  display:grid;
  grid-template-columns: 290px 1fr;  /* kiri fixed */
  gap: 16px;
  height: calc(100vh - 90px);        /* kalau header kamu tinggi beda, adjust */
  min-height: 0;
}

/* LEFT */
.stageLeft{
  display:flex;
  flex-direction:column;
  min-height:0;
  overflow:hidden;
}

.stageLeftHead{
  padding: 14px 14px 10px;
  border-bottom: 1px solid rgba(255,255,255,.10);
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:10px;
}

.stageTitle{ font-weight:900; }
.stageSub{ color: rgba(255,255,255,.7); font-size:12px; margin-top:4px; }
.stageMe{ color: rgba(255,255,255,.7); font-size:12px; margin-top:2px; }

.stageLeftBody{
  padding: 12px;
  overflow:auto;     /* scroll leaderboard */
  min-height:0;
}

/* RIGHT (top big + bottom 2 boxes) */
.stageRight{
  display:grid;
  grid-template-rows: 1fr 260px; /* bawah fix tinggi */
  gap: 14px;
  min-height:0;
}

/* TOP QUESTION BOX (besar) */
.stageTop{
  padding: 16px;
  min-height:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
}

.stageTopBar{
  width:100%;
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  margin-bottom: 10px;
}

.qBig{
  font-size: clamp(34px, 5vw, 70px);
  font-weight: 900;
  line-height: 1.05;
  margin: 10px 0 12px;
}

.buzzBig{
  width: min(360px, 70%);
  border: none;
  border-radius: 999px;
  padding: 14px 18px;
  font-weight: 900;
  letter-spacing: .08em;
  cursor:pointer;
  background: linear-gradient(180deg, rgba(242,163,199,.65), rgba(217,138,183,.55));
  color:#0b0a12;
  box-shadow: 0 18px 55px rgba(0,0,0,.55);
}
.buzzBig:disabled{ opacity:.55; cursor:not-allowed; }

.buzzInfo{
  margin-top: 10px;
  color: rgba(255,255,255,.78);
  font-size: 13px;
  min-height: 18px;
}

/* BOTTOM 2 BOX */
.stageBottom{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  min-height:0;
}

/* Pane base */
.pane{
  padding: 12px;
  min-height:0;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* tab header (kayak screenshot: tombol di atas box) */
.paneTab{
  width: 160px;
  margin: -20px auto 10px;  /* naik sedikit biar kayak “menempel” */
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:#fff;
  font-weight: 900;
  letter-spacing:.08em;
  cursor: default;
}
.paneTab.is-active{
  background: linear-gradient(180deg, var(--pink), var(--pink2));
  color:#0b0a12;
}

.paneBody{
  flex:1;
  min-height:0;
  display:flex;
  flex-direction:column;
  gap: 10px;
}

/* scroll area (history/chat list) */
.paneScroll{
  flex:1;
  min-height:0;
  overflow:auto;
  padding-right:6px;
}

/* input area nempel bawah */
.paneInput{
  flex-shrink:0;
  border-top: 1px solid rgba(255,255,255,.08);
  padding-top: 10px;
  position:relative;
}

/* input kecil (biar gak kegedean) */
#answerText{
  width:100%;
  height: 54px;          /* ini bikin pas kayak screenshot */
  resize:none;
  padding-right: 90px;   /* ruang tombol kirim */
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color:#fff;
  outline:none;
  box-sizing:border-box;
}

/* tombol kirim nempel kanan bawah */
#sendAnswerBtn{
  position:absolute;
  right: 0;
  bottom: 0;
  padding: 10px 14px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:#fff;
  cursor:pointer;
  font-weight:800;
}
#sendAnswerBtn:disabled{ opacity:.55; cursor:not-allowed; }

.answerTitle{ font-weight:800; margin-bottom:8px; color: rgba(255,255,255,.9); }
.paneHint{ margin-top:8px; color: rgba(255,255,255,.7); font-size:12px; }

/* hilangin status dobel kalau kamu mau */
#feedStatus{ display:none; }

/* responsive */
@media (max-width: 980px){
  .gameStage{
    grid-template-columns: 1fr;
    height:auto;
    min-height:100vh;
  }
  .stageRight{ grid-template-rows: auto auto; }
  .stageBottom{ grid-template-columns: 1fr; }
  .stageLeftBody{ max-height: 260px; }
}
  </style>
</head>

<body>

  <div class="gameWrap">

    <!-- TOP -->
    <div class="gameTop">
      <div class="brand">
        <b>New Resident</b>
        <small>Yogyakarta</small>
      </div>

      <nav class="nav">
        <a href="index.html">Beranda</a>
        <a href="confession.html">Confession</a>
        <a href="event.html">Event</a>
        <a class="active" href="games.html">Games</a>
      </nav>
    </div>

    <!-- MAIN -->
    <div class="gameMain">

      <!-- LEFT: LEADERBOARD -->
      <aside class="card lbCard">
        <div class="lbHead">
          <div>
            <b>Players</b><br />
            <small id="lbStatus">—</small>
          </div>
          <div id="meTag">—</div>
        </div>
        <div class="lbBody" id="lbList">
          <div class="lb-item"><div class="muted">Belum ada peserta.</div></div>
        </div>
      </aside>

      <!-- RIGHT -->
      <section class="centerCol">

        <!-- JOIN CARD -->
        <div id="joinCard" class="card joinCard" style="display:block;">
          <h2 style="margin:0 0 8px;color:var(--pink);">Cerdas Cermat (Live)</h2>
          <div style="color:rgba(255,255,255,.78);font-size:13px;">
            Masukkan kode room dari admin dan nickname kamu.
          </div>

          <div class="joinGrid">
            <div>
              <label style="display:block;font-size:12px;color:rgba(255,255,255,.7);margin-bottom:6px;">Kode Room</label>
              <input id="roomCode" placeholder="ABCDE1" />
            </div>
            <div>
              <label style="display:block;font-size:12px;color:rgba(255,255,255,.7);margin-bottom:6px;">Nickname</label>
              <input id="nickname" placeholder="nama kamu" />
            </div>
          </div>

          <div class="joinActions">
            <button id="joinBtn">Join</button>
            <div id="joinStatus"></div>
          </div>
        </div>

      <!-- GAME CARD -->
<div id="gameCard" class="gameStage" style="display:none;">
  <!-- RIGHT -->
  <section class="stageRight">

    <!-- TOP: QUESTION BOX (besar) -->
    <div class="stageTop card">
      <div class="stageTopBar">
        <div class="roomMeta">
          <div><b>Room:</b> <span id="roomLabel">-</span></div>
          <div class="kecil" id="gameStatus">—</div>
        </div>

        <button id="leaveBtn" class="btnMini">Keluar</button>
      </div>

      <div class="qLabel">PERTANYAAN</div>
      <div id="qText" class="qBig">—</div>

      <div class="qDivider"></div>

      <button id="buzzBtn" class="buzzBig" disabled>BUZZ</button>
      <div id="buzzInfo" class="buzzInfo"></div>
    </div>

    <!-- BOTTOM: 2 BOX (JAWABAN kiri, OBROLAN kanan) -->
    <div class="stageBottom">

      <!-- JAWABAN -->
      <div id="panelJawaban" class="card pane">
        <button id="tabJawaban" class="paneTab is-active" type="button">JAWABAN</button>

        <div class="paneBody">
          <!-- HISTORY (scroll di sini) -->
          <div class="paneScroll">
            <div id="feedStatus" class="paneStatus"></div>
            <div id="feedList"></div>
          </div>

          <!-- INPUT (nempel bawah) -->
          <div id="answerBox" class="paneInput" data-disabled="1">
            <div class="answerTitle">Jawab disini…</div>
            <textarea id="answerText" placeholder="Tulis jawaban..." disabled></textarea>

            <button id="sendAnswerBtn" disabled>Kirim</button>
            <div id="answerStatus" class="paneHint"></div>
          </div>
        </div>
      </div>

      <!-- OBROLAN -->
      <div id="panelObrolan" class="card pane">
        <button id="tabObrolan" class="paneTab is-locked" type="button" aria-disabled="true">OBROLAN</button>

        <div class="paneBody">
          <div class="paneScroll">
            <div class="paneStatus">Chat coming soon…</div>
            <div class="a"><span class="muted">Belum ada chat.</span></div>
          </div>

          <div class="paneInput" data-disabled="1">
            <div class="answerTitle">Kamu harus masuk untuk chat</div>
            <input disabled placeholder="Chat..." style="width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04);color:#fff;outline:none;" />
          </div>
        </div>
      </div>

    </div>
  </section>
</div>
        
  <!-- END OVERLAY -->
  <div id="endOverlay">
    <div class="overlayBox">
      <div class="overlayHead">
        <div>
          <div style="font-weight:900;font-size:18px;">Sesi Berakhir</div>
          <div id="finalSub" style="color:rgba(255,255,255,.78);margin-top:4px;">—</div>
        </div>
        <button id="closeOverlay" title="Tutup">✕</button>
      </div>
      <div id="finalList"></div>
    </div>
  </div>

  <script type="module" src="games.js"></script>
</body>
</html>
