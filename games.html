<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Games • New Resident Yogyakarta</title>

  <link rel="stylesheet" href="styles.css" />

  <style>
          /* ===== Sticky Header ===== */
    .header{
      position: sticky;
      top: 0;
      z-index: 3000;
      background: rgba(7,6,17,.82);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255,255,255,.14);
    }
    .headerInner{
      max-width: 980px;
      margin: 0 auto;
      padding: 12px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
    }
    :root{
      --pink: #f2a3c7;
      --pink2:#d98ab7;
      --panel: rgba(15, 14, 28, .65);
      --border: rgba(255,255,255,.12);
      --muted: rgba(255,255,255,.7);
    }

    body{ min-height: 100vh; }

    /* wrapper */
    .gameWrap{
      max-width: 1200px;
      margin: 0 auto;
      padding: 18px;
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 14px;
      height: 100vh;
      box-sizing: border-box;
    }

    /* header */
    .gameTop{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:14px;
    }
    .brand{ display:flex; flex-direction:column; gap:2px; }
    .brand b{ font-size:18px; color: var(--pink); letter-spacing:.02em; }
    .brand small{
      color: rgba(255,255,255,.65);
      font-size: 11px;
      letter-spacing: .14em;
      text-transform: uppercase;
    }

    .nav{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
    .nav a{
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.78);
      font-size: 13px;
      text-decoration:none;
      background: rgba(255,255,255,.04);
      transition: all .15s ease;
    }
    .nav a:hover{ background: rgba(255,255,255,.08); }
    .nav a.active{
      color:#0b0a12;
      background: linear-gradient(180deg, var(--pink), var(--pink2));
      border-color: rgba(255,255,255,.18);
      font-weight: 700;
    }

    /* main */
    .gameMain{
      display:grid;
      grid-template-columns: 1fr;
      gap: 16px;
      min-height: 0;
    }

    .card{
      border: 1px solid var(--border);
      background: var(--panel);
      backdrop-filter: blur(10px);
      border-radius: 22px;
      box-shadow: 0 28px 90px rgba(0,0,0,.55);
    }

    /* ====== 4 KOTAK ====== */
    .stage4{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      grid-template-rows: 1fr 1fr;
      gap: 14px;
      height: calc(100vh - 110px); /* adjust bila perlu */
      min-height: 0;
    }
    .stage4 > .card{ min-height:0; overflow:hidden; }

    .stage-q{ grid-column:1; grid-row:1; min-height:0; display:flex; }
    .stage-lb{ grid-column:2; grid-row:1; min-height:0; display:flex; flex-direction:column; }
    .stage-ans{ grid-column:1; grid-row:2; min-height:0; display:flex; flex-direction:column; }
    .stage-chat{ grid-column:2; grid-row:2; min-height:0; display:flex; flex-direction:column; }

    /* ===== SOAL ===== */
    .qCard{
      width:100%;
      padding: 16px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      min-height: 0;
    }
    .btnMini{
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color: #fff;
      cursor:pointer;
    }
    .btnMini:hover{ background: rgba(255,255,255,.08); }
    .qLabel{
      letter-spacing:.22em;
      font-size: 12px;
      color: rgba(255,255,255,.65);
      font-weight:700;
      margin-top: 6px;
    }
    .qBig{
      font-size: clamp(30px, 5vw, 64px);
      font-weight: 900;
      line-height: 1.05;
      margin: 1px 0 1px;
    }
    .qDivider{
      width:100%;
      height:1px;
      background: rgba(255,255,255,.10);
      margin: 10px 0 14px;
    }
    .buzzBig{
      width: min(75px);
      border: none;
      border-radius: 999px;
      padding: 10px 10px;
      font-weight: 900;
      letter-spacing: .08em;
      cursor:pointer;
      background: linear-gradient(180deg, rgba(242,163,199,.65), rgba(217,138,183,.55));
      color:#0b0a12;
      box-shadow: 0 18px 55px rgba(0,0,0,.55);
    }
    .buzzBig:disabled{ opacity:.55; cursor:not-allowed; }
    .buzzInfo{
      margin-top: 10px;
      color: rgba(255,255,255,.78);
      font-size: 13px;
      min-height: 18px;
    }

    /* ===== LEADERBOARD ===== */
    .lbHead{
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    #meTag{ color: rgba(255,255,255,.75); font-size:12px; }
    .lbBody{
      padding: 12px;
      overflow:auto;
      min-height: 0;
      flex:1;
    }
    .lb-item{
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius: 14px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 10px;
    }

    /* ===== JAWABAN: history + pill input ===== */
    .stage-ans{
      padding: 14px;
      gap: 10px;
    }
    .stage-ans .title{
      font-weight:900;
      margin-bottom:4px;
    }

    #feedList{
      flex:1;
      min-height:0;
      overflow:auto;
      padding-right:8px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    /* item history jawaban */
    .ansItem{
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius: 14px;
      color: rgba(255,255,255,.92);
      font-size: 13px;
      line-height: 1.35;
    }
    .ansItem .meta{
      display:flex;
      justify-content:space-between;
      gap:10px;
      font-size: 11px;
      color: rgba(255,255,255,.65);
      margin-bottom: 6px;
      align-items:center;
    }

    /* badge verdict */
    .verdict{
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:#fff;
      font-weight: 800;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: .08em;
    }
    .verdict.correct{ background: rgba(70, 220, 150, .12); }
    .verdict.wrong{ background: rgba(255, 90, 120, .12); }
    .verdict.pending{ opacity:.8; }

    #answerBox{
      flex-shrink:0;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,.10);
    }

    .pillWrap{
      display:flex;
      align-items:center;
      gap:10px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      border-radius: 999px;
      padding: 8px 10px;
    }

    #answerText{
      flex:1;
      height: 36px;
      max-height: 36px;
      border: none;
      outline: none;
      background: transparent;
      color:#fff;
      padding: 0 6px;
      resize:none;
      box-sizing:border-box;
    }

    #sendAnswerBtn{
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:#fff;
      font-weight: 800;
      cursor:pointer;
    }
    #sendAnswerBtn:disabled{ opacity:.55; cursor:not-allowed; }

    #answerBox[data-disabled="1"]{
      opacity: .65;
      filter: grayscale(.15);
    }
    #answerBox[data-disabled="1"] textarea,
    #answerBox[data-disabled="1"] button{
      cursor: not-allowed;
    }

    /* ===== OBROLAN ===== */
    .stage-chat{
      padding: 14px;
      gap: 10px;
    }
    .stage-chat .title{ font-weight:900; margin-bottom:4px; }
    .feedBox{
      flex:1;
      min-height:0;
      overflow:auto;
    }

    /* join */
    .joinCard{
      padding: 18px;
      max-width: 860px;
      margin: 0 auto;
    }
    .joinGrid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: 12px;
    }
    .joinGrid input{
      width:100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color:#fff;
      padding: 10px 12px;
      outline:none;
      box-sizing:border-box;
    }
    .joinActions{
      display:flex;
      gap: 10px;
      align-items:center;
      margin-top: 12px;
    }
    #joinBtn{
      padding: 10px 16px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color:#fff;
      cursor:pointer;
      font-weight: 800;
    }
    #joinBtn:hover{ background: rgba(255,255,255,.08); }
    #joinStatus{ color: rgba(255,255,255,.78); font-size: 13px; }

    /* overlay */
    #endOverlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.72);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 9999;
    }
    .overlayBox{
      width: 100%;
      max-width: 560px;
      padding: 16px;
      border-radius: 22px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(12,10,24,.92);
      box-shadow: 0 28px 90px rgba(0,0,0,.7);
    }
    .overlayHead{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom: 8px;
    }
    #closeOverlay{
      width: 38px;
      height: 38px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: #fff;
      cursor:pointer;
    }
    /* ===== FIX: JAWABAN (history keliatan, input pill kecil) ===== */

/* kotak jawaban jadi column */
.stage-ans{
  display:flex !important;
  flex-direction:column !important;
  min-height:0 !important;
}

/* history harus ngisi ruang & bisa scroll */
.stage-ans #feedList{
  flex: 1 1 auto !important;
  min-height: 0 !important;
  overflow: auto !important;
  padding-right: 8px !important;
  margin-bottom: 10px !important;
}

/* input area jangan gede */
.stage-ans #answerBox{
  flex: 0 0 auto !important;
  margin-top: 0 !important;
  padding-top: 10px !important;
  border-top: 1px solid rgba(255,255,255,.10) !important;
}

/* pill wrapper kecil */
.stage-ans .pillWrap{
  display:flex !important;
  align-items:center !important;
  gap: 10px !important;
  border: 1px solid rgba(255,255,255,.14) !important;
  background: rgba(255,255,255,.04) !important;
  border-radius: 999px !important;
  padding: 8px 10px !important;
}

/* PAKSA textarea jadi kecil (override height lama 70/110) */
.stage-ans #answerText{
  flex: 1 1 auto !important;
  height: 36px !important;
  min-height: 36px !important;
  max-height: 36px !important;
  padding: 0 8px !important;
  border: none !important;
  outline: none !important;
  background: transparent !important;
  resize: none !important;
  overflow: hidden !important;
  box-sizing: border-box !important;
}

/* tombol kirim kecil */
.stage-ans #sendAnswerBtn{
  position: static !important;
  padding: 8px 14px !important;
  border-radius: 999px !important;
}

/* kalau ada rule lama yang bikin feedList kecil, matiin */
#feedList{
  max-height: none !important;
}
    .judul {
    font-size: 18PX;
    font-weight: 700;
    color: var(--pink);
    text-shadow: 0 0 18px rgba(242, 161, 179, .25);
    }
    /* =========================
   HP tetap 4 kotak (2x2)
   ========================= */
@media (max-width: 980px){

  .gameWrap{
    height: 100vh !important;
    min-height: 100vh !important;
    padding: 10px !important;
    gap: 10px !important;
  }

  .stage4{
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    grid-template-rows: 1fr 1fr !important;
    gap: 10px !important;

    /* sesuaikan kalau header lebih tinggi */
    height: calc(100vh - 120px) !important;
    min-height: 0 !important;
  }

  .stage-q{ grid-column:1; grid-row:1; }
  .stage-lb{ grid-column:2; grid-row:1; }
  .stage-ans{ grid-column:1; grid-row:2; }
  .stage-chat{ grid-column:2; grid-row:2; }

  .stage4 > .card{
    min-height:0 !important;
    overflow:hidden !important;
  }

  /* Scroll internal */
  .stage-lb .lbBody,
  .stage-ans #feedList,
  .stage-chat .feedBox{
    overflow:auto !important;
    min-height:0 !important;
  }

  /* Perkecil soal biar muat */
  .qBig{
    font-size: 28px !important;
  }

  /* BUZZ full width */
  .buzzBig{
    width: 100% !important;
  }

  /* Input tetap kecil */
  .stage-ans #answerText{
    height: 34px !important;
    min-height: 34px !important;
    max-height: 34px !important;
  }

  .judul{
    font-size: 14px !important;
  }
}
  </style>
</head>

<body>
  <div class="gameWrap">

    <!-- TOP -->
    <div class="gameTop">
      <div class="brand">
        <b>New Resident</b>
        <small>Yogyakarta</small>
      </div>

      <nav class="nav">
        <a href="index.html">Beranda</a>
        <a href="confession.html">Confession</a>
        <a href="event.html">Event</a>
        <a class="active" href="games.html">Games</a>
      </nav>
    </div>

    <!-- MAIN -->
    <div class="gameMain">
      <section class="centerCol">

        <!-- JOIN CARD -->
        <div id="joinCard" class="card joinCard" style="display:block;">
          <h2 style="margin:0 0 8px;color:var(--pink);">Cerdas Cermat (Live)</h2>
          <div style="color:rgba(255,255,255,.78);font-size:13px;">
            Masukkan kode room dari admin dan nickname kamu.
          </div>

          <div class="joinGrid">
            <div>
              <label style="display:block;font-size:12px;color:rgba(255,255,255,.7);margin-bottom:6px;">Kode Room</label>
              <input id="roomCode" placeholder="ABCDE1" />
            </div>
            <div>
              <label style="display:block;font-size:12px;color:rgba(255,255,255,.7);margin-bottom:6px;">Nickname</label>
              <input id="nickname" placeholder="nama kamu" />
            </div>
          </div>

          <div class="joinActions">
            <button id="joinBtn">Join</button>
            <div id="joinStatus"></div>
          </div>
        </div>

        <!-- GAME CARD -->
        <div id="gameCard" class="stage4" hidden>

          <!-- ATAS KIRI: SOAL -->
          <div class="card stage-q">
            <div class="qCard">
              <div style="width:100%; display:flex; justify-content:space-between; align-items:flex-start; gap:10px;">
                <div style="text-align:left; font-size:13px; color:rgba(255,255,255,.78);">
                  <b>Room:</b> <span id="roomLabel">-</span>
                  <div id="gameStatus" style="opacity:.85; margin-top:6px;">—</div>
                </div>
                <button id="leaveBtn" class="btnMini">Keluar</button>
              </div>

              <div class="qLabel">PERTANYAAN</div>
              <div id="qText" class="qBig">—</div>

              <div class="qDivider"></div>

              <button id="buzzBtn" class="buzzBig" disabled>BUZZ</button>
              <div id="buzzInfo" class="buzzInfo"></div>
            </div>
          </div>

          <!-- ATAS KANAN: LEADERBOARD -->
          <aside class="card stage-lb">
            <div class="lbHead">
              <div>
                <b>Players</b><br />
                <small id="lbStatus">—</small>
              </div>
              <div id="meTag">—</div>
            </div>
            <div class="lbBody" id="lbList">
              <div class="lb-item">
                <div class="muted">Belum ada peserta.</div>
              </div>
            </div>
          </aside>

          <!-- BAWAH KIRI: JAWABAN -->
          <div class="card stage-ans">
            <div class="judul">JAWABAN</div>

            <!-- History jawaban masuk ke sini -->
            <div id="feedList">
              <div class="ansItem"><span style="opacity:.75">Belum ada jawaban.</span></div>
            </div>

            <!-- Pill input -->
            <div id="answerBox" data-disabled="1">
              <div class="pillWrap">
                <textarea id="answerText" placeholder="Tulis jawaban..." disabled></textarea>
                <button id="sendAnswerBtn" disabled>Kirim</button>
              </div>
            </div>
          </div>

          <!-- BAWAH KANAN: OBROLAN -->
          <div class="card stage-chat">
            <div class="judul">OBROLAN</div>
            <div class="feedBox">
              <div class="muted">Chat coming soon...</div>
            </div>
          </div>

        </div><!-- /#gameCard -->

      </section>
    </div>

  </div>

  <!-- END OVERLAY -->
  <div id="endOverlay">
    <div class="overlayBox">
      <div class="overlayHead">
        <div>
          <div style="font-weight:900;font-size:18px;">Sesi Berakhir</div>
          <div id="finalSub" style="color:rgba(255,255,255,.78);margin-top:4px;">—</div>
        </div>
        <button id="closeOverlay" title="Tutup">✕</button>
      </div>
      <div id="finalList"></div>
    </div>
  </div>

  <script type="module" src="games.js"></script>
</body>
</html>
